@page
@model CStat.Pages.EquipModel
@using CTask = CStat.Common;
@{
    ViewData["Title"] = "Equip";
    Layout = "_LayoutEquip";

}

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.3/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.3/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/bgaze/bootstrap4-dialogs@1/dist/bootstrap4-dialogs.min.js"></script>

    <style>
        #container {
            background-color: black;
            color: greenyellow;
            padding: 0px;
        }

        .erow {
            height: 12px;
            max-height: 12px;
        }

        #container td {
            vertical-align: middle;
        }

        .greenClass {
            background-color: black;
            color: greenyellow;
        }

        .yellowClass {
            background-color: yellow;
            color: black;
        }

        .redClass {
            background-color: red;
            color: black;
        }

    </style>

    <script>

        function setRowHeight() {

            let hdrDiv = document.querySelector("header");
            let ftrDiv = document.querySelector("footer");
            let hfHeight = 0;
            if (!!hdrDiv) {
                hfHeight += hdrDiv.clientHeight;
            }
            if (!!ftrDiv) {
                hfHeight += ftrDiv.clientHeight;
            }
            let totH = Math.min(document.documentElement.clientHeight, window.innerHeight || 0);
            let tblHeight = totH - hfHeight; 
            let rowHeight = Math.round(tblHeight / 5)-12;
            $(".erow").css("max-height", rowHeight + "px");
            $(".erow").css("height", rowHeight + "px");
        }

    </script>

</head>
<body onload="setRowHeight()" onresize="setRowHeight()">
    <table class="table" id="container">
        <tbody>
            @{
                var lastArd = Model.GetLastArd();
                var prTank = Model.GetLastTUTank();
            }

            <tr class="erow">
                <td>
                    Walk-in Freezer
                </td>
                <td>
                    <span class="@Model.GetColorClass("FreezerTempF")"><b>@lastArd.FreezerTempF.ToString("0.#")</b> F</span>
                </td>
                <td>
                    @lastArd.TimeStampStr()
                </td>
            </tr>
            <tr class="erow">

                <td>
                    Walk-in Frig.
                </td>
                <td>
                    <span class="@Model.GetColorClass("FridgeTempF")"><b>@lastArd.FridgeTempF.ToString("0.#")</b> F</span>
                </td>
                <td>
                    @lastArd.TimeStampStr()
                </td>
            </tr>
            <tr  class="erow">
                <td>
                    Propane Tank
                </td>
                <td>
                    <span class="@Model.GetColorClass("PropaneLevel")"><b>@prTank.LevelPct.ToString("0.#")</b> %</span>
                </td>
                <td>
                    @prTank.ReadingTimeStr()
                </td>
            </tr>
            <tr class="erow">
                <td>
                    Water Plumbing
                </td>
                <td>
                    <span class="@Model.GetColorClass("WaterPress")"><b>@lastArd.WaterPress.ToString("0.#")</b> psi</span>
                </td>
                <td>
                    @lastArd.TimeStampStr()
                </td>
            </tr>
            <tr class="erow">
                <td>
                    Electric Power
                </td>
                <td>
                    <span class="@Model.GetColorClass("WaterPress")"><b>@lastArd.WaterPress.ToString("0.#")</b>kwh</span>
                </td>
                <td>
                    @lastArd.TimeStampStr()
                </td>
            </tr>

        </tbody>
    </table>
</body>